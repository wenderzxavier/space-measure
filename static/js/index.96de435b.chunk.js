(this["webpackJsonpspace-measure"]=this["webpackJsonpspace-measure"]||[]).push([[2],{0:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"g",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return d})),r.d(t,"i",(function(){return p}));r(1);var n="SHAPE",a="LINE",i="full",o="quarter",c="half",u="3074457358398558776",s=[i,c,o],d={RECTANGLE:3,ELLIPSE:4,TRIANGLE:5,PARALLELOGRAM:10},p={3:"Rectangle",4:"Ellipse",5:"Triangle",10:"Parallelogram"}},10:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(9),a=r(0),i=function(e){return Object.values(a.c).includes(e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.metadata.hasOwnProperty(a.a)?[].concat(Object(n.a)(e),[t.id]):e}),[])}},17:function(e,t,r){e.exports=r(27)},27:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r.n(n),i=r(7),o=r(4),c=r(0),u=function(e){var t=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){return e.metadata.hasOwnProperty(c.a)}));return 0===e.length?null:e}(e);return t?t.reduce((function(e,t){if(t.type===c.h){var r=t.metadata[c.a],n=r.area,a=r.perimeter;return r.count?e:Object(o.a)(Object(o.a)({},e),{},{area:e.area+n,perimeter:e.perimeter+a})}if(t.type===c.f){var i=t.metadata[c.a].length;return Object(o.a)(Object(o.a)({},e),{},{length:e.length+i})}return e}),{area:0,perimeter:0,length:0}):null},s='<g id="Layer_1"><path d="M2.796,2.468 L2.749,22.468" fill-opacity="0" stroke="#000000" stroke-width="2"/><path d="M3.5,21.5 L23.564,21.5" fill-opacity="0" stroke="#000000" stroke-width="2"/><path d="M2.796,14.783 C3.209,13.972 3.594,13.171 4.059,12.371 C4.623,11.401 5.385,10.556 5.953,9.606 C6.402,8.857 7.01,8.19 7.426,7.395 C7.433,7.382 7.577,7.143 7.584,7.143 C7.752,7.143 8.14,9.507 8.163,9.606 C8.417,10.699 9.623,17.334 10.268,17.95 C10.54,18.21 10.69,17.331 10.846,16.995 C11.092,16.467 11.363,15.957 11.636,15.437 C12.745,13.317 13.466,11.153 14.687,9.053 C15.97,6.848 15.997,5.125 18.107,8.148 C18.173,8.244 19.421,9.809 19.475,9.757 C20.284,8.984 20.992,7.211 21.527,6.188" fill-opacity="0" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g>',d=r(8),p=r(9),f=r(6),h=r(5),l=r(10),b=function(e,t){miro.board.widgets.update({id:e,metadata:Object(f.a)({},c.a,Object(o.a)({},t))})},m=function(e){e.forEach((function(e){var t=e.style.shapeType||void 0;if(Object(l.b)(t)){var r,n,a,i=(null===(r=e.metadata[c.a])||void 0===r?void 0:r.areaType)||c.d,o=(null===(n=e.metadata[c.a])||void 0===n?void 0:n.area)||0,u=(null===(a=e.metadata[c.a])||void 0===a?void 0:a.perimeter)||0;c.b.includes(i)||(i=c.d);var s=Object(h.a)(t,e.width,e.height,i),d=Object(h.c)(t,e.width,e.height,i);o===s&&u===d&&e.metadata[c.a].areaType===i||b(e.id,{area:s,perimeter:d,areaType:i,shapeType:t})}else e.metadata[c.a]||b(e.id,{count:!0,shapeType:t})}))},g=function(e){e.forEach((function(e){var t,r=(null===(t=e.metadata[c.a])||void 0===t?void 0:t.length)||0,n=e.startPosition,a=e.endPosition,i=Object(h.b)(n.x,n.y,a.x,a.y);i!==r&&b(e.id,{length:i})}))},v=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.reduce((function(e,t){return t.type===c.h?Object(o.a)(Object(o.a)({},e),{},{shapes:[].concat(Object(p.a)(e.shapes),[t.id])}):t.type===c.f?Object(o.a)(Object(o.a)({},e),{},{lines:[].concat(Object(p.a)(e.lines),[t.id])}):e}),{lines:[],shapes:[]})).shapes.length>0)){e.next=7;break}return e.next=4,miro.board.widgets.get({type:c.h});case 4:n=e.sent,i=n.filter((function(e){return r.shapes.includes(e.id)})),m(i);case 7:if(!(r.lines.length>0)){e.next=13;break}return e.next=10,miro.board.widgets.get({type:c.f});case 10:u=e.sent,s=u.filter((function(e){return r.lines.includes(e.id)})),g(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();miro.onReady(Object(i.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return miro.initialize({extensionPoints:{bottomBar:{title:"widget counter",svgIcon:s,onClick:function(){miro.board.ui.openLeftSidebar("app.html")}},getWidgetMenuItems:function(e){var t=u(e);return t?Promise.resolve([{tooltip:"Space Measure",svgIcon:s,onClick:function(){var e=0!==t.area?"Area :".concat(t.area," | "):"",r=0!==t.perimeter?"Perimeter :".concat(t.perimeter," | "):"",n=0!==t.length?"Length :".concat(t.length):"",a="".concat(e).concat(r).concat(n);miro.showErrorNotification("".concat(0===a.length?"No information to display.":a))}}]):Promise.resolve([])}}}),e.next=3,miro.board.widgets.get({type:c.h});case 3:return t=e.sent,e.next=6,miro.board.widgets.get({type:c.f});case 6:r=e.sent,m(t),g(r),Object(d.b)(),miro.addListener("WIDGETS_TRANSFORMATION_UPDATED",(function(e){try{v(e.data)}catch(t){console.warn(t)}}));case 11:case"end":return e.stop()}}),e)}))))},5:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return u}));var n=r(0),a=function(e,t){return e*t},i=function(e,t){return 2*e+2*t},o=function(e,t,r,n){return Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2))},c=function(e,t,r,i){switch(e){case n.c.RECTANGLE:return a(t,r);case n.c.TRIANGLE:return function(e,t,r){var a=e*t/2;return r.toLowerCase()===n.e?a/2:a}(t,r,i);case n.c.ELLIPSE:return function(e,t,r){var a=t/2,i=e/2,o=Math.PI*a*i;return r.toLowerCase()===n.g?o/4:r.toLowerCase()===n.e?o/2:o}(t,r,i);case n.c.PARALLELOGRAM:return a(t,r);default:return}},u=function(e,t,r,a){switch(e){case n.c.RECTANGLE:return i(t,r);case n.c.TRIANGLE:return function(e,t,r){var a=e+Math.sqrt(Math.pow(e,2)+4*Math.pow(t,2));return r.toLowerCase()===n.e?a/2:a}(t,r,a);case n.c.ELLIPSE:return function(e,t,r){var a=t/2,i=e/2,o=Math.PI*(3*(i+a)-Math.sqrt((3*i+a)*(i+3*a)));return r.toLowerCase()===n.g?o/4:r.toLowerCase()===n.e?o/2:o}(t,r,a);case n.c.PARALLELOGRAM:return i(t,r);default:return}}},8:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return b}));var n=r(3),a=r.n(n),i=r(6),o=r(7),c=r(5),u=r(0),s=r(10),d=200,p=200,f=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,miro.board.widgets.get({id:t});case 2:r=e.sent[0],Object(s.b)(r.style.shapeType)?(n=Object(c.a)(r.style.shapeType,r.width,r.height,u.d),o=Object(c.c)(r.style.shapeType,r.width,r.height,u.d),miro.board.widgets.update({id:r.id,metadata:Object(i.a)({},u.a,{area:n,perimeter:o,areaType:u.d,shapeType:r.style.shapeType})})):miro.board.widgets.update({id:r.id,metadata:Object(i.a)({},u.a,{count:!0,shapeType:r.style.shapeType})});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,miro.board.widgets.get({id:t});case 2:r=e.sent[0],miro.board.widgets.update({id:r.id,metadata:Object(i.a)({},u.a,{length:Object(c.b)(r.startPosition.x,r.startPosition.y,r.endPosition.x,r.endPosition.y)})});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,n,o,s,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:u.d,r=f.length>1&&void 0!==f[1]?f[1]:u.c.RECTANGLE,e.next=4,miro.board.viewport.get();case 4:n=e.sent,o=n.x+n.width/2,s=n.y+n.height/2,miro.board.widgets.create({type:u.h,text:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," ").concat(u.i[r]),height:p,width:d,metadata:Object(i.a)({},u.a,{area:Object(c.a)(r,d,p,t),perimeter:Object(c.c)(r,d,p,t),areaType:t,shapeType:r}),style:{shapeType:r,borderStyle:t===u.d?2:1},x:o,y:s}),miro.board.viewport.get({viewport:{x:o,y:s}});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){return miro.addListener("WIDGETS_CREATED",(function(e){try{var t=e.data[0];t.metadata[u.a]||function(e,t){if(t===u.h)return f(e);if(t===u.f)return h(e);throw new Error("Widget not supported on SpaceMeasure.")}(t.id,t.type)}catch(r){console.warn(r)}}))}}},[[17,4,0]]]);
//# sourceMappingURL=index.96de435b.chunk.js.map