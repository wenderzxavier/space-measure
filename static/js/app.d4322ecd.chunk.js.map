{"version":3,"sources":["utils/constants.js","utils/calcs.js","widgetEvents/WidgetsCreated.js","utils/index.js","apps/sidebar.js","app.js"],"names":["SHAPE","LINE","FULL","QUARTER","HALF","APP_ID","AVAILABLE_AREA_TYPES","AVAILABLE_SHAPES","RECTANGLE","ELLIPSE","TRIANGLE","PARALLELOGRAM","SHAPE_NAME","3","4","5","10","parallelogramArea","width","height","parallelogramPerimeter","calculateLength","x1","y1","x2","y2","Math","sqrt","pow","calculateAreaForShape","shape","areaType","base","area","toLowerCase","triangleArea","horizontalDiameter","verticalDiameter","verticalRadius","horizontalRadius","PI","ellipseArea","calculatePerimeterForShape","perimeter","trianglePerimeter","ellipsePerimeter","WIDTH","HEIGHT","addMetadataToShape","widgetId","a","miro","board","widgets","get","id","widget","isShapeAvailable","style","shapeType","update","metadata","showErrorNotification","addMetadataToLine","length","startPosition","x","y","endPosition","createShape","viewport","boardCenter","positionX","positionY","create","type","text","charAt","toUpperCase","slice","borderStyle","initWidgetsCreatedListener","addListener","event","data","widgetType","Error","addMetadataToWidget","error","console","warn","Object","values","includes","WidgetCreationButtons","onClick","App","onReady","log","className","ReactDOM","render","document","getElementById"],"mappings":"kHAAA,kTAAO,IAAMA,EAAQ,QACRC,EAAO,OACPC,EAAO,OACPC,EAAU,UACVC,EAAO,OACPC,EAAS,sBACTC,EAAuB,CAACJ,EAAME,EAAMD,GACpCI,EAAmB,CAC9BC,UAAW,EACXC,QAAS,EACTC,SAAU,EACVC,cAAe,IAEJC,EAAa,CACxBC,EAAG,YACHC,EAAG,UACHC,EAAG,WACHC,GAAI,kB,8BCjBN,iHAGMC,EAAoB,SAACC,EAAOC,GAAR,OAAmBD,EAAQC,GAE/CC,EAAyB,SAACF,EAAOC,GAAR,OAA2B,EAARD,EAAqB,EAATC,GAmDjDE,EAAkB,SAACC,EAAIC,EAAIC,EAAIC,GAAb,OAC7BC,KAAKC,KAAKD,KAAKE,IAAIJ,EAAKF,EAAI,GAAKI,KAAKE,IAAIH,EAAKF,EAAI,KAExCM,EAAwB,SAACC,EAAOZ,EAAOC,EAAQY,GAC1D,OAAQD,GACN,KAAKvB,IAAiBC,UACpB,OAAOS,EAAkBC,EAAOC,GAClC,KAAKZ,IAAiBG,SACpB,OAzBe,SAACsB,EAAMb,EAAQY,GAClC,IAAME,EAAQD,EAAOb,EAAU,EAE/B,OAAIY,EAASG,gBAAkB9B,IAAa6B,EAAO,EAE5CA,EAoBIE,CAAajB,EAAOC,EAAQY,GACrC,KAAKxB,IAAiBE,QACpB,OA3Dc,SAAC2B,EAAoBC,EAAkBN,GACzD,IAAMO,EAAiBD,EAAmB,EACpCE,EAAmBH,EAAqB,EAExCH,EAAOP,KAAKc,GAAKF,EAAiBC,EAExC,OAAIR,EAASG,gBAAkB/B,IAAgB8B,EAAO,EAElDF,EAASG,gBAAkB9B,IAAa6B,EAAO,EAE5CA,EAiDIQ,CAAYvB,EAAOC,EAAQY,GACpC,KAAKxB,IAAiBI,cACpB,OAAOM,EAAkBC,EAAOC,GAClC,QACE,SAIOuB,EAA6B,SAACZ,EAAOZ,EAAOC,EAAQY,GAC/D,OAAQD,GACN,KAAKvB,IAAiBC,UACpB,OAAOY,EAAuBF,EAAOC,GACvC,KAAKZ,IAAiBG,SACpB,OAhCoB,SAACsB,EAAMb,EAAQY,GACvC,IAAMY,EACJX,EAAON,KAAKC,KAAKD,KAAKE,IAAII,EAAM,GAAK,EAAIN,KAAKE,IAAIT,EAAQ,IAE5D,OAAIY,EAASG,gBAAkB9B,IAAauC,EAAY,EAEjDA,EA0BIC,CAAkB1B,EAAOC,EAAQY,GAC1C,KAAKxB,IAAiBE,QACpB,OA7DmB,SAAC2B,EAAoBC,EAAkBN,GAC9D,IAAMO,EAAiBD,EAAmB,EACpCE,EAAmBH,EAAqB,EAExCO,EACJjB,KAAKc,IACJ,GAAKD,EAAmBD,GACvBZ,KAAKC,MACF,EAAIY,EAAmBD,IACrBC,EAAmB,EAAID,KAGhC,OAAIP,EAASG,gBAAkB/B,IAAgBwC,EAAY,EAEvDZ,EAASG,gBAAkB9B,IAAauC,EAAY,EAEjDA,EA6CIE,CAAiB3B,EAAOC,EAAQY,GACzC,KAAKxB,IAAiBI,cACpB,OAAOS,EAAuBF,EAAOC,GACvC,QACE,U,2JCrEA2B,EAAQ,IACRC,EAAS,IAETC,EAAkB,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,sEACHC,KAAKC,MAAMC,QAAQC,IAAI,CAAEC,GAAIN,IAD1B,OACnBO,EADmB,OACuC,GAC5DC,YAAiBD,EAAOE,MAAMC,YAC1B1B,EAAOJ,YACX2B,EAAOE,MAAMC,UACbH,EAAOtC,MACPsC,EAAOrC,OACPjB,KAGIyC,EAAYD,YAChBc,EAAOE,MAAMC,UACbH,EAAOtC,MACPsC,EAAOrC,OACPjB,KAGFiD,KAAKC,MAAMC,QAAQO,OAAO,CACxBL,GAAIC,EAAOD,GACXM,SAAS,eACNxD,IAAS,CACR4B,OACAU,YACAZ,SAAU7B,IACVyD,UAAWH,EAAOE,MAAMC,eAK9BR,KAAKW,sBAAsB,wCA7BJ,2CAAH,sDAiClBC,EAAiB,uCAAG,WAAOd,GAAP,eAAAC,EAAA,sEACFC,KAAKC,MAAMC,QAAQC,IAAI,CAAEC,GAAIN,IAD3B,OAClBO,EADkB,OACwC,GAChEL,KAAKC,MAAMC,QAAQO,OAAO,CACxBL,GAAIC,EAAOD,GACXM,SAAS,eACNxD,IAAS,CACR2D,OAAQ3C,YACNmC,EAAOS,cAAcC,EACrBV,EAAOS,cAAcE,EACrBX,EAAOY,YAAYF,EACnBV,EAAOY,YAAYD,OAVH,2CAAH,sDAiBVE,EAAW,uCAAG,gDAAAnB,EAAA,6DACzBnB,EADyB,+BACd7B,IACX4B,EAFyB,+BAEjBvB,IAAiBC,UAFA,SAIC2C,KAAKC,MAAMkB,SAAShB,MAJrB,OAInBiB,EAJmB,OAKnBC,EAAYD,EAAYL,EAAIK,EAAYrD,MAAQ,EAChDuD,EAAYF,EAAYJ,EAAII,EAAYpD,OAAS,EACvDgC,KAAKC,MAAMC,QAAQqB,OAAO,CACxBC,KAAM3E,IACN4E,KAAK,GAAD,OAAK7C,EAAS8C,OAAO,GAAGC,cAAgB/C,EAASgD,MAAM,GAAvD,YACFnE,IAAWkB,IAEbX,OAAQ4B,EACR7B,MAAO4B,EACPe,SAAS,eACNxD,IAAS,CACR4B,KAAMJ,YAAsBC,EAAOgB,EAAOC,EAAQhB,GAClDY,UAAWD,YAA2BZ,EAAOgB,EAAOC,EAAQhB,GAC5DA,SAAUA,EACV4B,UAAW7B,IAGf4B,MAAO,CACLC,UAAW7B,EACXkD,YAAajD,IAAa7B,IAAO,EAAI,GAEvCgE,EAAGM,EACHL,EAAGM,IAGLtB,KAAKC,MAAMkB,SAAShB,IAAI,CACtBgB,SAAU,CAAEJ,EAAGM,EAAWL,EAAGM,KA/BN,2CAAH,qDA+CXQ,EAA6B,kBACxC9B,KAAK+B,YAAY,mBAAmB,SAACC,GACnC,IACE,IAAM3B,EAAS2B,EAAMC,KAAK,GACrB5B,EAAOK,SAASxD,MAhBC,SAAC4C,EAAUoC,GACrC,GAAIA,IAAerF,IACjB,OAAOgD,EAAmBC,GAG5B,GAAIoC,IAAepF,IACjB,OAAO8D,EAAkBd,GAG3B,MAAM,IAAIqC,MAAM,yCAQVC,CAAoB/B,EAAOD,GAAIC,EAAOmB,MAExC,MAAOa,GACPC,QAAQC,KAAKF,S,6BC5HnB,6CAEa/B,EAAmB,SAAC3B,GAAD,OAC9B6D,OAAOC,OAAOrF,KAAkBsF,SAAS/D,K,iJCA9BgE,EAAwB,kBACnC,gCACE,wBAAQC,QAAS,kBAAM1B,YAAYnE,IAAMK,IAAiBE,UAA1D,iCAGA,wBAAQsF,QAAS,kBAAM1B,YAAYjE,IAAMG,IAAiBE,UAA1D,iCAGA,wBAAQsF,QAAS,kBAAM1B,YAAYlE,IAASI,IAAiBE,UAA7D,oCAGA,wBAAQsF,QAAS,kBAAM1B,YAAYnE,IAAMK,IAAiBC,YAA1D,uCAGA,wBAAQuF,QAAS,kBAAM1B,YAAYnE,IAAMK,IAAiBI,gBAA1D,uCAGA,wBAAQoF,QAAS,kBAAM1B,YAAYjE,IAAMG,IAAiBI,gBAA1D,uCAGA,wBAAQoF,QAAS,kBAAM1B,YAAYnE,IAAMK,IAAiBG,WAA1D,kCAGA,wBAAQqF,QAAS,kBAAM1B,YAAYjE,IAAMG,IAAiBG,WAA1D,sC,MCjBJ,SAASsF,IAgBP,OAfA7C,KAAK8C,SAAQ,WACX9C,KAAK+B,YAAY,qBAAqB,SAAC1B,GACrCiC,QAAQS,IAAI,qBACZT,QAAQS,IAAI1C,SAad,qBAAK2C,UAAU,MAAf,SACE,cAAC,EAAD,MAKNC,IAASC,OAAO,cAACL,EAAD,IAASM,SAASC,eAAe,W","file":"static/js/app.d4322ecd.chunk.js","sourcesContent":["export const SHAPE = \"SHAPE\";\nexport const LINE = \"LINE\";\nexport const FULL = \"full\";\nexport const QUARTER = \"quarter\";\nexport const HALF = \"half\";\nexport const APP_ID = \"3074457358398558776\";\nexport const AVAILABLE_AREA_TYPES = [FULL, HALF, QUARTER];\nexport const AVAILABLE_SHAPES = {\n  RECTANGLE: 3,\n  ELLIPSE: 4,\n  TRIANGLE: 5,\n  PARALLELOGRAM: 10,\n};\nexport const SHAPE_NAME = {\n  3: \"Rectangle\",\n  4: \"Ellipse\",\n  5: \"Triangle\",\n  10: \"Parallelogram\",\n};\n\nexport const SCALES = {\n  metric: [\n    \"1:1000\",\n    \"1:500\",\n    \"1:300\",\n    \"1:200\",\n    \"1:100\",\n    \"1:60\",\n    \"1:50\",\n    \"1:40\",\n    \"1:30\",\n    \"1:20\",\n    \"1:10\",\n    \"1:5\",\n    \"1:2\",\n    \"1:1\",\n    \"10:1\",\n    \"20:1\",\n    \"50:1\",\n  ],\n  civil: [\n    '1\":1\"',\n    '1\"=10\\'0\"',\n    '1\"=20\\'0\"',\n    '1\"=30\\'0\"',\n    '1\"=40\\'0\"',\n    '1\"=50\\'0\"',\n    '1\"=60\\'0\"',\n    '1\"=70\\'0\"',\n    '1\"=80\\'0\"',\n    '1\"=90\\'0\"',\n    '1\"=100\\'0\"',\n  ],\n};\n\nexport const SCALE_UNITS = {\n  \"Kilometers (Metric System)\": \"km\",\n  \"Meters (Metric System)\": \"m\",\n  \"Centimeters (Metric System)\": \"cm\",\n  \"Milimeterrs (Metric System)\": \"mm\",\n  \"Feet (Imperial System)\": \"ft\",\n};\n","/* eslint-disable no-undef */\nimport { AVAILABLE_SHAPES, HALF, QUARTER } from \"./constants\";\n\nconst parallelogramArea = (width, height) => width * height;\n\nconst parallelogramPerimeter = (width, height) => width * 2 + height * 2;\n\nconst ellipseArea = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const area = Math.PI * verticalRadius * horizontalRadius;\n\n  if (areaType.toLowerCase() === QUARTER) return area / 4;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst ellipsePerimeter = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const perimeter =\n    Math.PI *\n    (3 * (horizontalRadius + verticalRadius) -\n      Math.sqrt(\n        (3 * horizontalRadius + verticalRadius) *\n          (horizontalRadius + 3 * verticalRadius)\n      ));\n\n  if (areaType.toLowerCase() === QUARTER) return perimeter / 4;\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\nconst triangleArea = (base, height, areaType) => {\n  const area = (base * height) / 2;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst trianglePerimeter = (base, height, areaType) => {\n  const perimeter =\n    base + Math.sqrt(Math.pow(base, 2) + 4 * Math.pow(height, 2));\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\nexport const calculateLength = (x1, y1, x2, y2) =>\n  Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\nexport const calculateAreaForShape = (shape, width, height, areaType) => {\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramArea(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return triangleArea(width, height, areaType);\n    case AVAILABLE_SHAPES.ELLIPSE:\n      return ellipseArea(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramArea(width, height);\n    default:\n      return undefined;\n  }\n};\n\nexport const calculatePerimeterForShape = (shape, width, height, areaType) => {\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramPerimeter(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return trianglePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.ELLIPSE:\n      return ellipsePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramPerimeter(width, height);\n    default:\n      return undefined;\n  }\n};\n","/* eslint-disable no-undef */\nimport {\n  calculateAreaForShape,\n  calculateLength,\n  calculatePerimeterForShape,\n} from \"../utils/calcs\";\nimport {\n  APP_ID,\n  AVAILABLE_SHAPES,\n  LINE,\n  SHAPE,\n  FULL,\n  SHAPE_NAME,\n} from \"../utils/constants\";\nimport { isShapeAvailable } from \"../utils\";\n\nconst WIDTH = 200;\nconst HEIGHT = 200;\n\nconst addMetadataToShape = async (widgetId) => {\n  const widget = (await miro.board.widgets.get({ id: widgetId }))[0];\n  if (isShapeAvailable(widget.style.shapeType)) {\n    const area = calculateAreaForShape(\n      widget.style.shapeType,\n      widget.width,\n      widget.height,\n      FULL\n    );\n\n    const perimeter = calculatePerimeterForShape(\n      widget.style.shapeType,\n      widget.width,\n      widget.height,\n      FULL\n    );\n\n    miro.board.widgets.update({\n      id: widget.id,\n      metadata: {\n        [APP_ID]: {\n          area,\n          perimeter,\n          areaType: FULL,\n          shapeType: widget.style.shapeType,\n        },\n      },\n    });\n  } else {\n    miro.showErrorNotification(\"Shape not supported for SpaceMeasure\");\n  }\n};\n\nconst addMetadataToLine = async (widgetId) => {\n  const widget = (await miro.board.widgets.get({ id: widgetId }))[0];\n  miro.board.widgets.update({\n    id: widget.id,\n    metadata: {\n      [APP_ID]: {\n        length: calculateLength(\n          widget.startPosition.x,\n          widget.startPosition.y,\n          widget.endPosition.x,\n          widget.endPosition.y\n        ),\n      },\n    },\n  });\n};\n\nexport const createShape = async (\n  areaType = FULL,\n  shape = AVAILABLE_SHAPES.RECTANGLE\n) => {\n  const boardCenter = await miro.board.viewport.get();\n  const positionX = boardCenter.x + boardCenter.width / 2;\n  const positionY = boardCenter.y + boardCenter.height / 2;\n  miro.board.widgets.create({\n    type: SHAPE,\n    text: `${areaType.charAt(0).toUpperCase() + areaType.slice(1)} ${\n      SHAPE_NAME[shape]\n    }`,\n    height: HEIGHT,\n    width: WIDTH,\n    metadata: {\n      [APP_ID]: {\n        area: calculateAreaForShape(shape, WIDTH, HEIGHT, areaType),\n        perimeter: calculatePerimeterForShape(shape, WIDTH, HEIGHT, areaType),\n        areaType: areaType,\n        shapeType: shape,\n      },\n    },\n    style: {\n      shapeType: shape,\n      borderStyle: areaType === FULL ? 2 : 1,\n    },\n    x: positionX,\n    y: positionY,\n  });\n\n  miro.board.viewport.get({\n    viewport: { x: positionX, y: positionY },\n  });\n};\n\nconst addMetadataToWidget = (widgetId, widgetType) => {\n  if (widgetType === SHAPE) {\n    return addMetadataToShape(widgetId);\n  }\n\n  if (widgetType === LINE) {\n    return addMetadataToLine(widgetId);\n  }\n\n  throw new Error(\"Widget not supported on SpaceMeasure.\");\n};\n\nexport const initWidgetsCreatedListener = () =>\n  miro.addListener(\"WIDGETS_CREATED\", (event) => {\n    try {\n      const widget = event.data[0];\n      if (!widget.metadata[APP_ID]) {\n        addMetadataToWidget(widget.id, widget.type);\n      }\n    } catch (error) {\n      console.warn(error);\n    }\n  });\n","import { AVAILABLE_SHAPES } from \"./constants\";\n\nexport const isShapeAvailable = (shape) =>\n  Object.values(AVAILABLE_SHAPES).includes(shape);\n","import { AVAILABLE_SHAPES, FULL, HALF, QUARTER } from \"../utils/constants\";\nimport { createShape } from \"../widgetEvents/WidgetsCreated\";\n\nexport const WidgetCreationButtons = () => (\n  <div>\n    <button onClick={() => createShape(FULL, AVAILABLE_SHAPES.ELLIPSE)}>\n      Create Full Ellipse\n    </button>\n    <button onClick={() => createShape(HALF, AVAILABLE_SHAPES.ELLIPSE)}>\n      Create Half Ellipse\n    </button>\n    <button onClick={() => createShape(QUARTER, AVAILABLE_SHAPES.ELLIPSE)}>\n      Create Quarter Ellipse\n    </button>\n    <button onClick={() => createShape(FULL, AVAILABLE_SHAPES.RECTANGLE)}>\n      Create Full Quadrilateral\n    </button>\n    <button onClick={() => createShape(FULL, AVAILABLE_SHAPES.PARALLELOGRAM)}>\n      Create Full Parallelogram\n    </button>\n    <button onClick={() => createShape(HALF, AVAILABLE_SHAPES.PARALLELOGRAM)}>\n      Create Half Parallelogram\n    </button>\n    <button onClick={() => createShape(FULL, AVAILABLE_SHAPES.TRIANGLE)}>\n      Create Full Triangle\n    </button>\n    <button onClick={() => createShape(HALF, AVAILABLE_SHAPES.TRIANGLE)}>\n      Create Half Triangle\n    </button>\n  </div>\n);\n","/* eslint-disable no-undef */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WidgetCreationButtons } from \"./apps/sidebar\";\n\nimport \"./styles/app.css\";\n\n// import { LINE, SHAPE } from \"./utils/constants\";\n\nfunction App() {\n  miro.onReady(() => {\n    miro.addListener(\"SELECTION_UPDATED\", (widget) => {\n      console.log(\"SELECTION_UPDATED\");\n      console.log(widget);\n    });\n  });\n\n  // const handleClick = async () => {\n  //   let allShapes = await miro.board.widgets.get({ type: SHAPE });\n  //   console.log(allShapes);\n\n  //   let allLines = await miro.board.widgets.get({ type: LINE });\n  //   console.log(allLines);\n  // };\n\n  return (\n    <div className=\"App\">\n      <WidgetCreationButtons />\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// 1) Scale input: The scale on architectural drawings are used to reflect a dimension on the drawing, which corresponds to a\n// dimension in real life. And example of a scale 1/8\" = 1'; this means that 1/8 inches on the drawing will correspond to 1 feet in\n// real life. The dimensions could be in the metric system (m^2 and lm) or imperial system (Sqft and lf).\n\n// 2) Draw Polygon: I will need to draw polygons inside Miro boards. The number of pixels cover by the polygon, based on the input\n// scale, will result in the area of the polygon in SquareFeet or SquareMeters. I will be great if I will be able to draw rectangles\n// too, which a special type of polygons.\n\n// 3) Draw line: I will need to draw line segments inside Miro boards. The number of pixels cover by the line, based on the input\n// scale, will result in the length of the line in Feet or Meters.\n\n// 4) Count Shapes: I will need to count certain objects on architectural drawings. We can achieve that by clicking shapes on top\n// of the concerned object and the count those shapes. No scale or dimension is needed for the shapes... only their count.\n\n// 5) Report: I will need to be able to extract the information created using the web plug-in that will be built, into excel. The\n// idea is to compile all the information of every polygon, line, or count done on the Miro board and create a report that provides structured information.\n\n// All polygons, lines, and count will have specific properties that will be needed to be attached to each of them. Some of these properties\n// area: Name - Area - Type - Floor - Perimeter - Length - Count. As discussed on our call, these properties can be input using a new UI\n// inside Miro (example was the menu that appears on the left of the screen when selecting an object)\n"],"sourceRoot":""}