{"version":3,"sources":["constants.js","calcs.js","Listeners/WidgetsUpdate.js","index.js","logo.svg","app.js"],"names":["SHAPE","LINE","FULL","QUARTER","HALF","APP_ID","AVAILABLE_AREA_TYPES","AVAILABLE_SHAPES","RECTANGLE","CIRCLE","TRIANGLE","PARALLELOGRAM","parallelogramArea","width","height","parallelogramPerimeter","calculateAreaForShape","shape","areaType","console","log","base","area","toLowerCase","triangleArea","horizontalDiameter","verticalDiameter","verticalRadius","horizontalRadius","Math","PI","ellipseArea","calculatePerimeterForShape","perimeter","sqrt","pow","trianglePerimeter","ellipsePerimeter","updateShapesAreaPerimeter","widgets","LOCAL_SHAPES","splice","length","forEach","widget","metadata","includes","Object","values","style","shapeType","calculatedArea","calculatedPerimeter","push","id","groupId","updateLocalShapes","miro","board","update","updateMiroShape","LOCAL_LINES","LOCAL_GROUPS","onReady","a","initialize","extensionPoints","bottomBar","title","svgIcon","onClick","ui","openLeftSidebar","get","type","constants","allShapes","allLines","App","addListener","handleClick","className","src","logo","alt","updateStyle","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/app.2609a2ad.chunk.js","sourcesContent":["export const SHAPE = \"SHAPE\";\nexport const LINE = \"LINE\";\nexport const FULL = \"full\";\nexport const QUARTER = \"quarter\";\nexport const HALF = \"half\";\nexport const APP_ID = \"3074457358398558776\";\nexport const AVAILABLE_AREA_TYPES = [FULL, HALF, QUARTER];\nexport const AVAILABLE_SHAPES = {\n  RECTANGLE: 3,\n  CIRCLE: 4,\n  TRIANGLE: 5,\n  PARALLELOGRAM: 10,\n};\n","/* eslint-disable no-undef */\nimport { AVAILABLE_SHAPES, HALF, QUARTER } from \"./constants\";\n\nconst parallelogramArea = (width, height) => width * height;\n\nconst parallelogramPerimeter = (width, height) => width * 2 + height * 2;\n\nconst ellipseArea = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const area = Math.PI * verticalRadius * horizontalRadius;\n\n  if (areaType.toLowerCase() === QUARTER) return area / 4;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst ellipsePerimeter = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const perimeter =\n    Math.PI *\n    (3 * (horizontalRadius + verticalRadius) -\n      Math.sqrt(\n        (3 * horizontalRadius + verticalRadius) *\n          (horizontalRadius + 3 * verticalRadius)\n      ));\n\n  if (areaType.toLowerCase() === QUARTER) return perimeter / 4;\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\nconst triangleArea = (base, height, areaType) => {\n  const area = (base * height) / 2;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst trianglePerimeter = (base, height, areaType) => {\n  const perimeter =\n    base + Math.sqrt(Math.pow(base, 2) + 4 * Math.pow(height, 2));\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\n// export const updateShapeMetadata = async (widgetId) => {\n//   const widget = await miro.board.widgets.get({ id: widgetId });\n//   miro.board.widgets.update({\n//     id: widget[0].id,\n//     metadata: {\n//       \"3074457358398558776\": {\n//         area: squareArea(widget[0].width, widget[0].height),\n//         perimeter: squarePerimeter(widget[0].width, widget[0].height),\n//       },\n//     },\n//   });\n// };\n\nexport const calculateAreaForShape = (shape, width, height, areaType) => {\n  console.log(shape);\n  console.log(width);\n  console.log(height);\n  console.log(areaType);\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramArea(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return triangleArea(width, height, areaType);\n    case AVAILABLE_SHAPES.CIRCLE:\n      return ellipseArea(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramArea(width, height);\n    default:\n      return undefined;\n  }\n};\n\nexport const calculatePerimeterForShape = (shape, width, height, areaType) => {\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramPerimeter(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return trianglePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.CIRCLE:\n      return ellipsePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramPerimeter(width, height);\n    default:\n      return undefined;\n  }\n};\n","/* eslint-disable no-undef */\nimport {\n  AVAILABLE_SHAPES,\n  APP_ID,\n  FULL,\n  AVAILABLE_AREA_TYPES,\n} from \"../constants\";\nimport { calculateAreaForShape, calculatePerimeterForShape } from \"../calcs\";\nimport { LOCAL_SHAPES } from \"..\";\n\nconst updateMiroShape = (id, area, perimeter, areaType) => {\n  miro.board.widgets.update({\n    id,\n    metadata: {\n      [APP_ID]: {\n        area,\n        perimeter,\n        areaType,\n      },\n    },\n  });\n};\n\nconst updateLocalShapes = (widget, areaType, area, perimeter) =>\n  LOCAL_SHAPES.push({\n    id: widget.id,\n    areaType,\n    area,\n    perimeter,\n    width: widget.width,\n    height: widget.height,\n    groupId: widget.groupId,\n    shapeType: widget.style.shapeType,\n  });\n\nexport const updateShapesAreaPerimeter = (widgets) => {\n  LOCAL_SHAPES.splice(0, LOCAL_SHAPES.length);\n  widgets.forEach((widget) => {\n    let areaType = widget.metadata[APP_ID]?.areaType || FULL;\n    let area = widget.metadata[APP_ID]?.area || 0;\n    let perimeter = widget.metadata[APP_ID]?.perimeter || 0;\n\n    if (!AVAILABLE_AREA_TYPES.includes(areaType)) {\n      areaType = FULL;\n    }\n\n    if (Object.values(AVAILABLE_SHAPES).includes(widget.style.shapeType)) {\n      const calculatedArea = calculateAreaForShape(\n        widget.style.shapeType,\n        widget.width,\n        widget.height,\n        areaType\n      );\n\n      const calculatedPerimeter = calculatePerimeterForShape(\n        widget.style.shapeType,\n        widget.width,\n        widget.height,\n        areaType\n      );\n\n      updateLocalShapes(widget, areaType, calculatedArea, calculatedPerimeter);\n\n      console.log(LOCAL_SHAPES);\n\n      if (\n        area !== calculatedArea ||\n        perimeter !== calculatedPerimeter ||\n        widget.metadata[APP_ID].areaType !== areaType\n      ) {\n        updateMiroShape(\n          widget.id,\n          calculatedArea,\n          calculatedPerimeter,\n          areaType\n        );\n      }\n    }\n  });\n};\n","/* eslint-disable no-undef */\n// import { updateShapeMetadata } from \"./calcs\";\nimport * as constants from \"./constants\";\nimport { updateShapesAreaPerimeter } from \"./Listeners/WidgetsUpdate\";\n\nexport const LOCAL_SHAPES = [];\nexport const LOCAL_LINES = [];\nexport const LOCAL_GROUPS = [];\n\nmiro.onReady(async () => {\n  const icon24 =\n    '<g id=\"Layer_1\"><path d=\"M2.796,2.468 L2.749,22.468\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\"/><path d=\"M3.5,21.5 L23.564,21.5\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\"/><path d=\"M2.796,14.783 C3.209,13.972 3.594,13.171 4.059,12.371 C4.623,11.401 5.385,10.556 5.953,9.606 C6.402,8.857 7.01,8.19 7.426,7.395 C7.433,7.382 7.577,7.143 7.584,7.143 C7.752,7.143 8.14,9.507 8.163,9.606 C8.417,10.699 9.623,17.334 10.268,17.95 C10.54,18.21 10.69,17.331 10.846,16.995 C11.092,16.467 11.363,15.957 11.636,15.437 C12.745,13.317 13.466,11.153 14.687,9.053 C15.97,6.848 15.997,5.125 18.107,8.148 C18.173,8.244 19.421,9.809 19.475,9.757 C20.284,8.984 20.992,7.211 21.527,6.188\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></g>';\n\n  miro.initialize({\n    extensionPoints: {\n      bottomBar: {\n        title: \"widget counter\",\n        svgIcon: icon24,\n        onClick: () => {\n          miro.board.ui.openLeftSidebar(\"app.html\");\n        },\n      },\n    },\n  });\n\n  let allShapes = await miro.board.widgets.get({ type: constants.SHAPE });\n  console.log(allShapes);\n  let allLines = await miro.board.widgets.get({ type: constants.LINE });\n  console.log(allLines);\n\n  updateShapesAreaPerimeter(allShapes);\n  //  = await miro.board.widgets.get({ type: \"shape\" });\n\n  // miro.addListener(\"SELECTION_UPDATED\", (event) => {\n  //   event.data.forEach((widget) => {\n  //     if (widget.type === constants.SHAPE) {\n  //       miro.showNotification(\n  //         `Area: ${widget.metadata[\"3074457358398558776\"].area}`\n  //       );\n  //     }\n  //   });\n  // });\n\n  // miro.addListener(\"WIDGETS_CREATED\", (event) => {\n  //   console.log(\"WIDGETS_CREATED\");\n  //   if (event.data[0].type === constants.SHAPE) {\n  //     updateShapeMetadata(event.data[0].id);\n  //   }\n  // });\n\n  // miro.addListener(\"WIDGETS_DELETED\", (event) => {\n  //   console.log(event);\n  // });\n\n  // miro.addListener(\"WIDGETS_TRANSFORMATION_UPDATED\", (event) => {\n  //   event.data.forEach((widget) => {\n  //     if (widget.type === constants.SHAPE) {\n  //       updateShapeMetadata(widget.id);\n  //     }\n  //   });\n  // });\n\n  // miro.board.widgets.get({ type: constants.SHAPE }).then((widgets) => {\n  //   widgets.forEach((widget) => {\n  //     if (!widget.metadata[\"3074457358398558776\"]) {\n  //       updateShapeMetadata(widget.id);\n  //     }\n  //   });\n  // });\n});\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","/* eslint-disable no-undef */\nimport logo from \"./logo.svg\";\nimport \"./app.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport { SHAPE } from \"./constants\";\nimport { LOCAL_SHAPES } from \"./\";\n\nfunction App() {\n  miro.onReady(() => {\n    miro.addListener(\"SELECTION_UPDATED\", (widget) => {\n      console.log(\"SELECTION_UPDATED\");\n      console.log(widget);\n    });\n  });\n\n  const handleClick = async () => {\n    let allShapes = await miro.board.widgets.get({ type: SHAPE });\n    console.log(allShapes);\n    console.log(\"LOCAL SHAPES\");\n    console.log(LOCAL_SHAPES);\n    // let allFrames = await miro.board.widgets.get({ type: \"frame\" });\n    // console.log(allFrames);\n    // let allCurves = await miro.board.widgets.get({ type: \"curve\" });\n    // console.log(allCurves);\n    // let allLines = await miro.board.widgets.get({ type: \"line\" });\n    // console.log(allLines);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>App version 1.15</p>\n        <button onClick={() => handleClick()}>Click Here</button>\n        <button onClick={() => updateStyle()}>Change Style</button>\n      </header>\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// 1) Scale input: The scale on architectural drawings are used to reflect a dimension on the drawing, which corresponds to a\n// dimension in real life. And example of a scale 1/8\" = 1'; this means that 1/8 inches on the drawing will correspond to 1 feet in\n// real life. The dimensions could be in the metric system (m^2 and lm) or imperial system (Sqft and lf).\n\n// 2) Draw Polygon: I will need to draw polygons inside Miro boards. The number of pixels cover by the polygon, based on the input\n// scale, will result in the area of the polygon in SquareFeet or SquareMeters. I will be great if I will be able to draw rectangles\n// too, which a special type of polygons.\n\n// 3) Draw line: I will need to draw line segments inside Miro boards. The number of pixels cover by the line, based on the input\n// scale, will result in the length of the line in Feet or Meters.\n\n// 4) Count Shapes: I will need to count certain objects on architectural drawings. We can achieve that by clicking shapes on top\n// of the concerned object and the count those shapes. No scale or dimension is needed for the shapes... only their count.\n\n// 5) Report: I will need to be able to extract the information created using the web plug-in that will be built, into excel. The\n// idea is to compile all the information of every polygon, line, or count done on the Miro board and create a report that provides structured information.\n\n// All polygons, lines, and count will have specific properties that will be needed to be attached to each of them. Some of these properties\n// area: Name - Area - Type - Floor - Perimeter - Length - Count. As discussed on our call, these properties can be input using a new UI\n// inside Miro (example was the menu that appears on the left of the screen when selecting an object)\n"],"sourceRoot":""}