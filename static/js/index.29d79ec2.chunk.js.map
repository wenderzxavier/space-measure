{"version":3,"sources":["utils/constants.js","widgetEvents/WidgetsCreated.js","utils/index.js","widgetEvents/WidgetsUpdate.js","widgetEvents/SelectionUpdated.js","apps/miroBoard.js","widgetEvents/WidgetsTransformationUpdated.js","index.js","utils/calcs.js","utils/scale.js"],"names":["SHAPE","LINE","FULL","QUARTER","LINEAR","SQUARE","HALF","APP_ID","AVAILABLE_AREA_TYPES","AVAILABLE_SHAPES","RECTANGLE","ELLIPSE","TRIANGLE","PARALLELOGRAM","SHAPE_NAME","3","4","5","10","PIXEL_CONVERSION","PIXEL_FORMATTER","SCALE_UNITS","SCALE_UNITS_FORMATTER","linear","square","SHAPE_ICONS","13","viewBox","xmlns","cx","cy","r","fill","stroke","stroke-width","21","d","12","id","26","23","24","6","22","25","17","18","16","15","20","8","7","11","14","19","WIDTH","HEIGHT","addMetadataToShape","widgetId","a","miro","board","widgets","get","widget","isShapeAvailable","style","shapeType","area","calculateAreaForShape","width","height","perimeter","calculatePerimeterForShape","update","metadata","areaType","count","addMetadataToLine","length","calculateLength","startPosition","x","y","endPosition","createShape","shape","viewport","boardCenter","positionX","positionY","create","type","text","charAt","toUpperCase","slice","borderStyle","initWidgetsCreatedListener","addListener","event","data","widgetType","Error","addMetadataToWidget","error","console","warn","Object","values","includes","getIdsFromWidgetsWithMetadata","reduce","accumulated","currentWidget","hasOwnProperty","updateMiroShape","updateShapesAreaPerimeter","forEach","undefined","calculatedArea","calculatedPerimeter","log","updateLinesLengths","calculatedLength","infoForMenuItem","widgetsWithMetadata","filter","getWidgetsWithMetadata","icon24","widgetTransformationUpdateMetadata","widgetsIDs","ids","shapes","lines","allShapes","shapesToUpdate","allLines","linesToUpdate","line","onReady","initialize","extensionPoints","bottomBar","title","svgIcon","onClick","ui","openLeftSidebar","getWidgetMenuItems","infoToDisplay","Promise","resolve","tooltip","formatValue","message","showErrorNotification","unit","getScaleUnit","scale","getCurrentScale","setUnit","constants","setScale","parallelogramArea","parallelogramPerimeter","x1","y1","x2","y2","Math","sqrt","pow","base","toLowerCase","triangleArea","horizontalDiameter","verticalDiameter","verticalRadius","horizontalRadius","PI","ellipseArea","trianglePerimeter","ellipsePerimeter","localStorage","getItem","setItem","numberWithCommas","value","toString","replace","scalar","currentUnit","currentScale","scaledValue","toFixed"],"mappings":"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","file":"static/js/index.29d79ec2.chunk.js","sourcesContent":["export const SHAPE = \"SHAPE\";\nexport const LINE = \"LINE\";\nexport const FULL = \"full\";\nexport const QUARTER = \"quarter\";\nexport const LINEAR = \"linear\";\nexport const SQUARE = \"square\";\nexport const HALF = \"half\";\nexport const APP_ID = \"3074457358398558776\";\nexport const AVAILABLE_AREA_TYPES = [FULL, HALF, QUARTER];\nexport const AVAILABLE_SHAPES = {\n  RECTANGLE: 3,\n  ELLIPSE: 4,\n  TRIANGLE: 5,\n  PARALLELOGRAM: 10,\n};\n\nexport const SHAPE_NAME = {\n  3: \"Rectangle\",\n  4: \"Ellipse\",\n  5: \"Triangle\",\n  10: \"Parallelogram\",\n};\n\nexport const PIXEL_CONVERSION = [\n  \"1px -> 1000000px\",\n  \"1px -> 100000px\",\n  \"1px -> 10000px\",\n  \"1px -> 1000px\",\n  \"1px -> 100px\",\n  \"1px -> 10px\",\n  \"1px -> 1px\",\n  \"1px -> 0.1px\",\n  \"1px -> 0.01px\",\n  \"1px -> 0.001px\",\n  \"1px -> 0.0001px\",\n  \"1px -> 0.00001px\",\n  \"1px -> 0.000001px\",\n];\n\nexport const PIXEL_FORMATTER = {\n  \"1px -> 1000000px\": 1000000,\n  \"1px -> 100000px\": 100000,\n  \"1px -> 10000px\": 10000,\n  \"1px -> 1000px\": 1000,\n  \"1px -> 100px\": 100,\n  \"1px -> 10px\": 10,\n  \"1px -> 1px\": 1,\n  \"1px -> 0.1px\": 0.1,\n  \"1px -> 0.01px\": 0.01,\n  \"1px -> 0.001px\": 0.001,\n  \"1px -> 0.0001px\": 0.0001,\n  \"1px -> 0.00001px\": 0.00001,\n  \"1px -> 0.000001px\": 0.000001,\n};\n\nexport const SCALE_UNITS = [\"m/m²\", \"ft/ft²\"];\n\nexport const SCALE_UNITS_FORMATTER = {\n  \"m/m²\": {\n    linear: \"m\",\n    square: \"m²\",\n  },\n  \"ft/ft²\": {\n    linear: \"ft\",\n    square: \"ft²\",\n  },\n};\n\nexport const SHAPE_ICONS = {\n  // Arrow Left\n  13: (\n    <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"12\" cy=\"12\" r=\"9\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></circle>\n    </svg>\n  ),\n  // Arrow Left Right\n  21: (\n    <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" d=\"M22.586 12L15 4.414V9H9V4.414L1.414 12 9 19.586V15h6v4.586L22.586 12z\"></path>\n    </svg>\n  ),\n  // Arrow Right\n  12: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-arrow-right\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M13 4.828V8H4v8h9v3.172L21.172 12 13 4.828zM3 6h8V2.284a1 1 0 011.678-.735L24 12 12.678 22.45A1 1 0 0111 21.717V18H3a1 1 0 01-1-1V7a1 1 0 011-1z\"\n      ></path>\n    </svg>\n  ),\n  // Barrel\n  26: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-barrel\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M2 4.245C2 3.005 6.477 2 12 2s10 1.005 10 2.245v14.51C22 19.995 17.523 21 12 21S2 19.995 2 18.755V4.245zM4 7.15v10.84c.332.133.797.273 1.367.401C7.075 18.774 9.45 19 12 19s4.925-.226 6.633-.609A9.117 9.117 0 0020 17.99V7.15c-1.979.569-4.793.85-8 .85s-6.021-.281-8-.85zm0-2.096c.327.11.713.215 1.148.313C6.934 5.767 9.381 6 12 6c2.619 0 5.066-.232 6.852-.633.435-.098.82-.204 1.148-.313V5.01a9.117 9.117 0 00-1.367-.402C16.925 4.226 14.55 4 12 4s-4.925.226-6.633.609A9.117 9.117 0 004 5.01v.043z\"\n      ></path>\n    </svg>\n  ),\n  // Brace Left\n  23: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-brace-left\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M11 12a4.99 4.99 0 012 4v3a2 2 0 002 2h1a1 1 0 010 2h-1a4 4 0 01-4-4v-3a3 3 0 00-3-3 1 1 0 010-2 3 3 0 003-3V5a4 4 0 014-4h1a1 1 0 010 2h-1a2 2 0 00-2 2v3a4.992 4.992 0 01-2 4z\"\n      ></path>\n    </svg>\n  ),\n  // Brace Right\n  24: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-brace-right\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M13 12a4.992 4.992 0 01-2-4V5a2 2 0 00-2-2H8a1 1 0 110-2h1a4 4 0 014 4v3a3 3 0 003 3 1 1 0 010 2 3 3 0 00-3 3v3a4 4 0 01-4 4H8a1 1 0 010-2h1a2 2 0 002-2v-3a4.99 4.99 0 012-4z\"\n      ></path>\n    </svg>\n  ),\n  // Bubble\n  6: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-babble\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M13.073 19l-4.646 3.65A1.5 1.5 0 016 21.472V19a5 5 0 01-5-5V7a5 5 0 015-5h12a5 5 0 015 5v7a5 5 0 01-5 5h-4.927zM8 20.443L12.381 17H18a3 3 0 003-3V7a3 3 0 00-3-3H6a3 3 0 00-3 3v7a3 3 0 003 3h2v3.443z\"\n      ></path>\n    </svg>\n  ),\n  // Circle\n  4: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-oval\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"12\" cy=\"12\" r=\"9\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></circle>\n    </svg>\n  ),\n  // Cloud\n  22: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-cloud\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M11.358 4.095c-.592 0-1.157.344-1.512.945L8.96 6.543l-1.638-.6a.783.783 0 00-.272-.048c-.521 0-1.021.546-1.021 1.305 0 .064.003.127.01.19l.236 2.033-2.028.282c-.616.086-1.152.744-1.152 1.595 0 .666.333 1.233.798 1.48l1.594.842-.595 1.701a2.65 2.65 0 00-.147.877c0 1.312.91 2.305 1.938 2.305.286 0 .56-.073.816-.216l1.81-1.013 1.03 1.8c.304.529.79.829 1.294.829.466 0 .913-.254 1.221-.712l1.196-1.782 1.752 1.238c.24.17.505.256.781.256.826 0 1.572-.814 1.572-1.905l-.001-.061-.037-1.429 1.315-.556c.857-.362 1.473-1.325 1.473-2.454 0-1.218-.717-2.234-1.661-2.523l-1.673-.51.204-1.737c.009-.075.013-.152.013-.23 0-.925-.623-1.605-1.296-1.605-.198 0-.387.055-.564.163l-1.96 1.2-1.014-2.063c-.34-.691-.952-1.1-1.596-1.1zm3.236 16.266l-.11.154c-.672.906-1.7 1.485-2.85 1.485-1.313 0-2.464-.752-3.112-1.883a3.748 3.748 0 01-1.839.483c-2.227 0-4.033-1.97-4.033-4.4 0-.553.093-1.081.264-1.569C1.78 14.032 1 12.766 1 11.3c0-1.883 1.29-3.438 2.958-3.67a3.741 3.741 0 01-.025-.43c0-1.878 1.396-3.4 3.117-3.4.347 0 .68.062.992.176C8.742 2.787 9.966 2 11.358 2c1.232 0 2.331.616 3.054 1.581l.422.69.542-.266a3.13 3.13 0 011.116-.205c1.873 0 3.391 1.657 3.391 3.7 0 .16-.009.319-.027.474C21.67 8.528 23 10.344 23 12.5c0 1.997-1.142 3.703-2.752 4.384l.002.116c0 2.21-1.642 4-3.667 4a3.42 3.42 0 01-1.846-.544l-.143-.095z\"\n      ></path>\n    </svg>\n  ),\n  // Cross\n  25: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-cross\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M15 4H9v5H4v6h5v5h6v-5h5V9h-5V4zm2 3h4a1 1 0 011 1v8a1 1 0 01-1 1h-4v4a1 1 0 01-1 1H8a1 1 0 01-1-1v-4H3a1 1 0 01-1-1V8a1 1 0 011-1h4V3a1 1 0 011-1h8a1 1 0 011 1v4z\"\n      ></path>\n    </svg>\n  ),\n  // Hexagon\n  17: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-hexagon\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M16.817 4H7.183l-4.4 8 4.4 8h9.634l4.4-8-4.4-8zm1.468-1.482l4.95 9a1 1 0 010 .964l-4.95 9a1 1 0 01-.876.518H6.59a1 1 0 01-.876-.518l-4.95-9a1 1 0 010-.964l4.95-9A1 1 0 016.591 2H17.41a1 1 0 01.876.518z\"\n      ></path>\n    </svg>\n  ),\n  // Octagon\n  18: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-octagon\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M15.172 4H8.828L4 8.828v6.344L8.828 20h6.344L20 15.172V8.828L15.172 4zm1.12-1.707l5.415 5.414a1 1 0 01.293.707v7.172a1 1 0 01-.293.707l-5.414 5.414a1 1 0 01-.707.293H8.414a1 1 0 01-.707-.293l-5.414-5.414A1 1 0 012 15.586V8.414a1 1 0 01.293-.707l5.414-5.414A1 1 0 018.414 2h7.172a1 1 0 01.707.293z\"\n      ></path>\n    </svg>\n  ),\n  // Parallelogram\n  10: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-parall\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M6.463 5L2.544 19h14.993l3.919-14H6.463zm-.758-2h17.07a1 1 0 01.962 1.27l-4.479 16a1 1 0 01-.963.73H1.225a1 1 0 01-.962-1.27l4.479-16A1 1 0 015.705 3z\"\n      ></path>\n    </svg>\n  ),\n  // Pentagon\n  16: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-pentagon\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M11.976 3.28l-8.791 7.052L6.7 20h10.6l3.515-9.666-8.84-7.053zm10.964 7.062l-4 11A1 1 0 0118 22H6a1 1 0 01-.94-.658l-4-11a1 1 0 01.314-1.122l9.975-8a1 1 0 011.249-.002l10.026 8a1 1 0 01.316 1.124z\"\n      ></path>\n    </svg>\n  ),\n  // Pill\n  15: \"\",\n  // Predefined Process\n  20: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__predefined-process\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M3 3h18a1 1 0 011 1v16a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zm13 2H8v14h8V5zm2 0v14h2V5h-2zM6 5H4v14h2V5z\"\n      ></path>\n    </svg>\n  ),\n  // Rectangle\n  3: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-square\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" d=\"M3 3h18v18H3z\"></path>\n    </svg>\n  ),\n  // Rhombus\n  8: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-rhombus\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M12 2.617L2.617 12 12 21.383 21.383 12 12 2.617zm.707-2.121l10.797 10.797a1 1 0 010 1.414L12.707 23.504a1 1 0 01-1.414 0L.496 12.707a1 1 0 010-1.414L11.293.496a1 1 0 011.414 0z\"\n      ></path>\n    </svg>\n  ),\n  // Rounder\n  7: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-rounded\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M7 4a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H7zm0-2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5z\"\n      ></path>\n    </svg>\n  ),\n  // Star\n  11: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-star\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M16.985 19.501l-.952-5.55 4.033-3.932-5.574-.81L12 4.16 9.508 9.21l-5.574.81 4.033 3.931-.952 5.551L12 16.881l4.985 2.62zM12 19.14l-5.704 2.999A1.08 1.08 0 014.729 21l1.09-6.351-4.616-4.499a1.08 1.08 0 01.599-1.842l6.377-.927 2.853-5.779a1.08 1.08 0 011.936 0l2.853 5.78 6.377.926a1.08 1.08 0 01.599 1.842l-4.615 4.499L19.272 21a1.08 1.08 0 01-1.568 1.139l-5.704-3z\"\n      ></path>\n    </svg>\n  ),\n  // Text Rect\n  14: \"\",\n  // Trapeze\n  19: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-trapeze\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M6.649 3.98l-3.2 15.99H20.56l-3.2-15.99H6.65zm-.82-2H18.18a1 1 0 01.98.804l3.6 17.99a1 1 0 01-.98 1.196H2.23a1 1 0 01-.981-1.196l3.6-17.99a1 1 0 01.98-.804z\"\n      ></path>\n    </svg>\n  ),\n  // Triangle\n  5: (\n    <svg viewBox=\"0 0 24 24\" id=\"newlayout__shape-triangle\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fill=\"currentColor\"\n        d=\"M12 4.922L4.197 19h15.606L12 4.922zm.875-2.58l9.484 17.175A1 1 0 0121.484 21H2.516a1 1 0 01-.875-1.483l9.483-17.175a1 1 0 011.751 0z\"\n      ></path>\n    </svg>\n  ),\n};\n","/* eslint-disable no-undef */\nimport { calculateAreaForShape, calculateLength, calculatePerimeterForShape } from \"../utils/calcs\";\nimport { APP_ID, AVAILABLE_SHAPES, LINE, SHAPE, FULL, SHAPE_NAME } from \"../utils/constants\";\nimport { isShapeAvailable } from \"../utils\";\n\nconst WIDTH = 200;\nconst HEIGHT = 200;\n\nconst addMetadataToShape = async (widgetId) => {\n  const widget = (await miro.board.widgets.get({ id: widgetId }))[0];\n  if (isShapeAvailable(widget.style.shapeType)) {\n    const area = calculateAreaForShape(widget.style.shapeType, widget.width, widget.height, FULL);\n\n    const perimeter = calculatePerimeterForShape(widget.style.shapeType, widget.width, widget.height, FULL);\n\n    miro.board.widgets.update({\n      id: widget.id,\n      metadata: {\n        [APP_ID]: {\n          area,\n          perimeter,\n          areaType: FULL,\n          shapeType: widget.style.shapeType,\n        },\n      },\n    });\n  } else {\n    miro.board.widgets.update({\n      id: widget.id,\n      metadata: {\n        [APP_ID]: {\n          count: true,\n          shapeType: widget.style.shapeType,\n        },\n      },\n    });\n  }\n};\n\nconst addMetadataToLine = async (widgetId) => {\n  const widget = (await miro.board.widgets.get({ id: widgetId }))[0];\n  miro.board.widgets.update({\n    id: widget.id,\n    metadata: {\n      [APP_ID]: {\n        length: calculateLength(widget.startPosition.x, widget.startPosition.y, widget.endPosition.x, widget.endPosition.y),\n      },\n    },\n  });\n};\n\nexport const createShape = async (areaType = FULL, shape = AVAILABLE_SHAPES.RECTANGLE) => {\n  const boardCenter = await miro.board.viewport.get();\n  const positionX = boardCenter.x + boardCenter.width / 2;\n  const positionY = boardCenter.y + boardCenter.height / 2;\n  miro.board.widgets.create({\n    type: SHAPE,\n    text: `${areaType.charAt(0).toUpperCase() + areaType.slice(1)} ${SHAPE_NAME[shape]}`,\n    height: HEIGHT,\n    width: WIDTH,\n    metadata: {\n      [APP_ID]: {\n        area: calculateAreaForShape(shape, WIDTH, HEIGHT, areaType),\n        perimeter: calculatePerimeterForShape(shape, WIDTH, HEIGHT, areaType),\n        areaType: areaType,\n        shapeType: shape,\n      },\n    },\n    style: {\n      shapeType: shape,\n      borderStyle: areaType === FULL ? 2 : 1,\n    },\n    x: positionX,\n    y: positionY,\n  });\n\n  miro.board.viewport.get({\n    viewport: { x: positionX, y: positionY },\n  });\n};\n\nconst addMetadataToWidget = (widgetId, widgetType) => {\n  if (widgetType === SHAPE) {\n    return addMetadataToShape(widgetId);\n  }\n\n  if (widgetType === LINE) {\n    return addMetadataToLine(widgetId);\n  }\n\n  throw new Error(\"Widget not supported on SpaceMeasure.\");\n};\n\nexport const initWidgetsCreatedListener = () =>\n  miro.addListener(\"WIDGETS_CREATED\", (event) => {\n    try {\n      const widget = event.data[0];\n      if (!widget.metadata[APP_ID]) {\n        addMetadataToWidget(widget.id, widget.type);\n      }\n    } catch (error) {\n      console.warn(error);\n    }\n  });\n","import { APP_ID, AVAILABLE_SHAPES } from \"./constants\";\n\nexport const isShapeAvailable = (shape) =>\n  Object.values(AVAILABLE_SHAPES).includes(shape);\n\nexport const getIdsFromWidgetsWithMetadata = (widgets = []) =>\n  widgets.reduce((accumulated, currentWidget) => {\n    if (currentWidget.metadata.hasOwnProperty(APP_ID)) {\n      return [...accumulated, currentWidget.id];\n    }\n    return accumulated;\n  }, []);\n","/* eslint-disable no-undef */\nimport { APP_ID, FULL, AVAILABLE_AREA_TYPES } from \"../utils/constants\";\nimport { calculateAreaForShape, calculateLength, calculatePerimeterForShape } from \"../utils/calcs\";\nimport { isShapeAvailable } from \"../utils\";\n\nexport const updateMiroShape = async (id, metadata) =>\n  await miro.board.widgets.update({\n    id,\n    metadata: {\n      [APP_ID]: {\n        ...metadata,\n      },\n    },\n  });\n\nexport const updateShapesAreaPerimeter = (widgets) => {\n  widgets.forEach((widget) => {\n    let shapeType = widget.style.shapeType || undefined;\n\n    if (isShapeAvailable(shapeType)) {\n      let areaType = widget.metadata[APP_ID]?.areaType || FULL;\n      let area = widget.metadata[APP_ID]?.area || 0;\n      let perimeter = widget.metadata[APP_ID]?.perimeter || 0;\n\n      if (!AVAILABLE_AREA_TYPES.includes(areaType)) {\n        areaType = FULL;\n      }\n\n      const calculatedArea = calculateAreaForShape(shapeType, widget.width, widget.height, areaType);\n\n      const calculatedPerimeter = calculatePerimeterForShape(shapeType, widget.width, widget.height, areaType);\n\n      if (area !== calculatedArea) {\n        console.log(\"Area not equal\");\n        console.log(area);\n        console.log(calculatedArea);\n      }\n\n      if (perimeter !== calculatedPerimeter) {\n        console.log(\"Perimeter not equal\");\n        console.log(perimeter);\n        console.log(calculatedPerimeter);\n      }\n      if (widget.metadata[APP_ID].areaType !== areaType) {\n        console.log(\"Area Type not equal\");\n        console.log(widget.metadata[APP_ID].areaType);\n        console.log(areaType);\n      }\n\n      if (area !== calculatedArea || perimeter !== calculatedPerimeter || widget.metadata[APP_ID].areaType !== areaType) {\n        updateMiroShape(widget.id, {\n          area: calculatedArea,\n          perimeter: calculatedPerimeter,\n          areaType,\n          shapeType,\n        });\n      }\n    } else {\n      if (!widget.metadata[APP_ID]) {\n        updateMiroShape(widget.id, {\n          count: true,\n          shapeType,\n        });\n      }\n    }\n  });\n};\n\nexport const updateLinesLengths = (widgets) => {\n  widgets.forEach((widget) => {\n    let length = widget.metadata[APP_ID]?.length || 0;\n\n    const { startPosition, endPosition } = widget;\n\n    const calculatedLength = calculateLength(startPosition.x, startPosition.y, endPosition.x, endPosition.y);\n\n    console.log(\"Calculated Length\");\n    console.log(calculatedLength);\n\n    if (calculatedLength !== length) {\n      updateMiroShape(widget.id, { length: calculatedLength });\n    }\n  });\n};\n","import { APP_ID, LINE, SHAPE } from \"../utils/constants\";\n\nconst getWidgetsWithMetadata = (widgets = []) => {\n  const widgetsWithMetadata = widgets.filter((widget) => widget.metadata.hasOwnProperty(APP_ID));\n\n  if (widgetsWithMetadata.length === 0) {\n    return null;\n  }\n\n  return widgetsWithMetadata;\n};\n\nexport const infoForMenuItem = (widgets) => {\n  const widgetsWithMetadata = getWidgetsWithMetadata(widgets);\n\n  if (!widgetsWithMetadata) return null;\n\n  return widgetsWithMetadata.reduce(\n    (accumulated, currentWidget) => {\n      if (currentWidget.type === SHAPE) {\n        const { area, perimeter, count } = currentWidget.metadata[APP_ID];\n\n        if (count) {\n          return accumulated;\n        }\n\n        return {\n          ...accumulated,\n          area: accumulated.area + area,\n          perimeter: accumulated.perimeter + perimeter,\n        };\n      }\n\n      if (currentWidget.type === LINE) {\n        const { length } = currentWidget.metadata[APP_ID];\n        return {\n          ...accumulated,\n          length: accumulated.length + length,\n        };\n      }\n      return accumulated;\n    },\n    {\n      area: 0,\n      perimeter: 0,\n      length: 0,\n    }\n  );\n};\n","import { LINEAR, SQUARE } from \"../utils/constants\";\nimport { formatValue } from \"../utils/scale\";\nimport { infoForMenuItem } from \"../widgetEvents/SelectionUpdated\";\n\n/* eslint-disable no-undef */\nconst icon24 =\n  '<g id=\"Layer_1\"><path d=\"M2.796,2.468 L2.749,22.468\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\"/><path d=\"M3.5,21.5 L23.564,21.5\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\"/><path d=\"M2.796,14.783 C3.209,13.972 3.594,13.171 4.059,12.371 C4.623,11.401 5.385,10.556 5.953,9.606 C6.402,8.857 7.01,8.19 7.426,7.395 C7.433,7.382 7.577,7.143 7.584,7.143 C7.752,7.143 8.14,9.507 8.163,9.606 C8.417,10.699 9.623,17.334 10.268,17.95 C10.54,18.21 10.69,17.331 10.846,16.995 C11.092,16.467 11.363,15.957 11.636,15.437 C12.745,13.317 13.466,11.153 14.687,9.053 C15.97,6.848 15.997,5.125 18.107,8.148 C18.173,8.244 19.421,9.809 19.475,9.757 C20.284,8.984 20.992,7.211 21.527,6.188\" fill-opacity=\"0\" stroke=\"#000000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></g>';\n\nexport const initializeSidebarAndMenuItem = () =>\n  miro.initialize({\n    extensionPoints: {\n      bottomBar: {\n        title: \"widget counter\",\n        svgIcon: icon24,\n        onClick: () => {\n          miro.board.ui.openLeftSidebar(\"app.html\");\n        },\n      },\n      getWidgetMenuItems: (widgets) => {\n        const infoToDisplay = infoForMenuItem(widgets);\n        if (!infoToDisplay) {\n          return Promise.resolve([]);\n        }\n        return Promise.resolve([\n          {\n            tooltip: \"Space Measure\",\n            svgIcon: icon24,\n            onClick: () => {\n              const area = infoToDisplay.area !== 0 ? `Area :${formatValue(infoToDisplay.area, SQUARE)} | ` : \"\";\n              const perimeter = infoToDisplay.perimeter !== 0 ? `Perimeter :${formatValue(infoToDisplay.perimeter, LINEAR)} | ` : \"\";\n              const length = infoToDisplay.length !== 0 ? `Length :${formatValue(infoToDisplay.length, LINEAR)}` : \"\";\n\n              const message = `${area}${perimeter}${length}`;\n\n              miro.showErrorNotification(`${message.length === 0 ? \"No information to display.\" : message}`);\n            },\n          },\n        ]);\n      },\n    },\n  });\n","/* eslint-disable no-undef */\nimport { LINE, SHAPE } from \"../utils/constants\";\nimport { updateLinesLengths, updateShapesAreaPerimeter } from \"./WidgetsUpdate\";\n\nconst widgetTransformationUpdateMetadata = async (widgets) => {\n  console.log(widgets);\n  const widgetsIDs = widgets.reduce(\n    (ids, currentWidget) => {\n      if (currentWidget.type === SHAPE) {\n        return {\n          ...ids,\n          shapes: [...ids.shapes, currentWidget.id],\n        };\n      }\n\n      if (currentWidget.type === LINE) {\n        return {\n          ...ids,\n          lines: [...ids.lines, currentWidget.id],\n        };\n      }\n\n      return ids;\n    },\n    {\n      lines: [],\n      shapes: [],\n    }\n  );\n\n  if (widgetsIDs.shapes.length > 0) {\n    const allShapes = await miro.board.widgets.get({ type: SHAPE });\n    const shapesToUpdate = allShapes.filter((shape) => widgetsIDs.shapes.includes(shape.id));\n\n    updateShapesAreaPerimeter(shapesToUpdate);\n  }\n\n  if (widgetsIDs.lines.length > 0) {\n    let allLines = await miro.board.widgets.get({ type: LINE });\n    const linesToUpdate = allLines.filter((line) => widgetsIDs.lines.includes(line.id));\n    console.log(linesToUpdate);\n    updateLinesLengths(linesToUpdate);\n  }\n};\n\nexport const initWidgetTransformatioUpdated = () =>\n  miro.addListener(\"WIDGETS_TRANSFORMATION_UPDATED\", (event) => {\n    try {\n      widgetTransformationUpdateMetadata(event.data);\n    } catch (error) {\n      console.warn(error);\n    }\n  });\n","/* eslint-disable no-undef */\n// import { updateShapeMetadata } from \"./calcs\";\nimport { initializeSidebarAndMenuItem } from \"./apps/miroBoard\";\nimport * as constants from \"./utils/constants\";\nimport { getCurrentScale, getScaleUnit, setScale, setUnit } from \"./utils/scale\";\nimport { initWidgetsCreatedListener } from \"./widgetEvents/WidgetsCreated\";\nimport { initWidgetTransformatioUpdated } from \"./widgetEvents/WidgetsTransformationUpdated\";\nimport { updateLinesLengths, updateShapesAreaPerimeter } from \"./widgetEvents/WidgetsUpdate\";\n\nmiro.onReady(async () => {\n  initializeSidebarAndMenuItem();\n\n  const unit = getScaleUnit();\n  const scale = getCurrentScale();\n  if (!unit) setUnit(constants.SCALE_UNITS[0]);\n  if (!scale) setScale(\"1:1\");\n\n  const allShapes = await miro.board.widgets.get({ type: constants.SHAPE });\n  const allLines = await miro.board.widgets.get({ type: constants.LINE });\n\n  updateShapesAreaPerimeter(allShapes);\n  updateLinesLengths(allLines);\n\n  miro.addListener(\"SELECTION_UPDATED\", (event) => {\n    console.log(event);\n  });\n\n  initWidgetsCreatedListener();\n  initWidgetTransformatioUpdated();\n});\n","/* eslint-disable no-undef */\nimport { AVAILABLE_SHAPES, HALF, QUARTER } from \"./constants\";\n\nconst parallelogramArea = (width, height) => width * height;\n\nconst parallelogramPerimeter = (width, height) => width * 2 + height * 2;\n\nconst ellipseArea = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const area = Math.PI * verticalRadius * horizontalRadius;\n\n  if (areaType.toLowerCase() === QUARTER) return area / 4;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst ellipsePerimeter = (horizontalDiameter, verticalDiameter, areaType) => {\n  const verticalRadius = verticalDiameter / 2;\n  const horizontalRadius = horizontalDiameter / 2;\n\n  const perimeter =\n    Math.PI *\n    (3 * (horizontalRadius + verticalRadius) -\n      Math.sqrt(\n        (3 * horizontalRadius + verticalRadius) *\n          (horizontalRadius + 3 * verticalRadius)\n      ));\n\n  if (areaType.toLowerCase() === QUARTER) return perimeter / 4;\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\nconst triangleArea = (base, height, areaType) => {\n  const area = (base * height) / 2;\n\n  if (areaType.toLowerCase() === HALF) return area / 2;\n\n  return area;\n};\n\nconst trianglePerimeter = (base, height, areaType) => {\n  const perimeter =\n    base + Math.sqrt(Math.pow(base, 2) + 4 * Math.pow(height, 2));\n\n  if (areaType.toLowerCase() === HALF) return perimeter / 2;\n\n  return perimeter;\n};\n\nexport const calculateLength = (x1, y1, x2, y2) =>\n  Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\nexport const calculateAreaForShape = (shape, width, height, areaType) => {\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramArea(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return triangleArea(width, height, areaType);\n    case AVAILABLE_SHAPES.ELLIPSE:\n      return ellipseArea(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramArea(width, height);\n    default:\n      return undefined;\n  }\n};\n\nexport const calculatePerimeterForShape = (shape, width, height, areaType) => {\n  switch (shape) {\n    case AVAILABLE_SHAPES.RECTANGLE:\n      return parallelogramPerimeter(width, height);\n    case AVAILABLE_SHAPES.TRIANGLE:\n      return trianglePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.ELLIPSE:\n      return ellipsePerimeter(width, height, areaType);\n    case AVAILABLE_SHAPES.PARALLELOGRAM:\n      return parallelogramPerimeter(width, height);\n    default:\n      return undefined;\n  }\n};\n","import { APP_ID, LINEAR, PIXEL_FORMATTER, SCALE_UNITS_FORMATTER } from \"./constants\";\n\nexport const getCurrentScale = () => localStorage.getItem(`${APP_ID}_scale`);\n\nexport const getScaleUnit = () => localStorage.getItem(`${APP_ID}_unit`);\n\nexport const setScale = (scale) => localStorage.setItem(`${APP_ID}_scale`, scale);\n\nexport const setUnit = (unit) => localStorage.setItem(`${APP_ID}_unit`, unit);\n\nconst numberWithCommas = (value) => {\n  return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n};\n\nexport const formatValue = (value, scalar = LINEAR) => {\n  const currentUnit = getScaleUnit();\n  const currentScale = getCurrentScale();\n\n  const scaledValue = value / PIXEL_FORMATTER[currentScale];\n\n  return `${numberWithCommas(scaledValue.toFixed(2))} ${SCALE_UNITS_FORMATTER[currentUnit][scalar]}`;\n};\n"],"sourceRoot":""}